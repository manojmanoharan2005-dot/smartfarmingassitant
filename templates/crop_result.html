{% extends "base.html" %}

{% block title %}Crop Recommendations - Smart Farming Assistant{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/crop.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-layout">
    <!-- Green Header Section -->
    <div class="dashboard-header">
        <div class="header-content">
            <div class="header-left">
                <h1>AI-Powered Crop Recommendation</h1>
                <p>Get scientific crop suggestions based on soil nutrients and climate conditions</p>
            </div>
            <div class="header-right">
                <span class="header-date">ğŸ“… Today, {{ current_date }}</span>
                <a class="logout-button" href="{{ url_for('auth.logout') }}">ğŸ”´ Logout</a>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">ğŸŒ¾</div>
                <div>
                    <div class="sidebar-title">Smart Farming</div>
                    <div class="sidebar-subtitle">Agricultural Platform</div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Main Menu</div>
                    <a href="{{ url_for('dashboard.dashboard') }}" class="nav-link">
                        <i class="fas fa-th-large"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="{{ url_for('crop.crop_suggestion') }}" class="nav-link active">
                        <i class="fas fa-seedling"></i>
                        <span>Crop Suggestion</span>
                    </a>
                    <a href="{{ url_for('fertilizer.fertilizer_recommend') }}" class="nav-link">
                        <i class="fas fa-flask"></i>
                        <span>Fertilizer Advice</span>
                    </a>
                    <a href="{{ url_for('market.market_watch') }}" class="nav-link">
                        <i class="fas fa-chart-line"></i>
                        <span>Market Prices</span>
                        <span class="badge">Live</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Tools</div>
                    <a href="#" class="nav-link" onclick="openCalculatorModal(); return false;">
                        <i class="fas fa-calculator"></i>
                        <span>Expense Calculator</span>
                    </a>
                    <a href="#" class="nav-link" onclick="openWeatherModal(); return false;">
                        <i class="fas fa-cloud-sun"></i>
                        <span>Weather Forecast</span>
                    </a>
                    <a href="#" class="nav-link" onclick="openGovtSchemesModal(); return false;">
                        <i class="fas fa-landmark"></i>
                        <span>Govt. Schemes</span>
                    </a>
                    <a href="#" class="nav-link" onclick="openEquipmentModal(); return false;">
                        <i class="fas fa-truck-pickup"></i>
                        <span>Equipment Sharing</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-user">
                <div class="user-info" onclick="openProfileModal()" style="cursor: pointer;">
                    <div class="user-avatar">{{ user_name[0] if user_name else 'U' }}</div>
                    <div class="user-details">
                        <h4>{{ user_name }}</h4>
                        <span>Farmer</span>
                    </div>
                    <i class="fas fa-chevron-right" style="margin-left: auto; opacity: 0.5; font-size: 12px;"></i>
                </div>
            </div>
        </div>

        <!-- Content Panel -->
        <div class="content-panel">
            <!-- Results Header -->
            <div class="results-header">
                <div class="header-icon">
                    <span class="filter-icon">ğŸ”»</span>
                </div>
                <div class="header-content">
                    <h2>Top Crop Recommendations for Your Farm</h2>
                    <p>Based on your soil analysis and environmental conditions, here are our suggestions:</p>
                </div>
            </div>

            <!-- Crop Recommendations Grid -->
            <div class="crop-recommendations">
                <div class="crop-cards-grid">
                    <!-- Maize -->
                    <div class="crop-card high-priority">
                        <div class="crop-header">
                            <h3>Maize</h3>
                            <span class="priority-badge high">High Priority</span>
                        </div>
                        <div class="crop-details">
                            <div class="detail-item">
                                <span class="icon">ğŸŒ¡ï¸</span>
                                <span class="label">Temperature:</span>
                                <span class="value">20-30Â°C (Optimum Favorable)</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">ğŸ’§</span>
                                <span class="label">Humidity:</span>
                                <span class="value">Moderate Rainfall</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">ğŸŒ§ï¸</span>
                                <span class="label">Rainfall:</span>
                                <span class="value">500-800mm</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">â±ï¸</span>
                                <span class="label">Duration:</span>
                                <span class="value">90-120 days</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">ğŸŒ</span>
                                <span class="label">Soil:</span>
                                <span class="value">Well-drained</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">ğŸ”¬</span>
                                <span class="label">pH:</span>
                                <span class="value">6.0-7.5</span>
                            </div>
                        </div>
                        <div class="growing-conditions">
                            <h4>Ideal Growing Conditions</h4>
                            <ul>
                                <li>ğŸŒ¡ï¸ 25-30Â°Celsius</li>
                                <li>ğŸ’§ 60-70% Humidity</li>
                                <li>ğŸŒ§ï¸ 600-750mm Rainfall</li>
                                <li>ğŸŒ Sandy to Clay Loam</li>
                                <li>ğŸ”¬ pH 6.0-7.0</li>
                                <li>â˜€ï¸ Full Sun</li>
                            </ul>
                        </div>
                        <div class="card-actions">
                            <button class="btn-outline" onclick="viewDetails('maize')">ğŸ“„ Details</button>
                            <button class="btn-start" onclick="startGrowing('Maize', 0.92)">ğŸŒ± Start Growing</button>
                        </div>
                    </div>

                    <!-- Jute -->
                    <div class="crop-card high-priority">
                        <div class="crop-header">
                            <h3>Jute</h3>
                            <span class="priority-badge high">High Priority</span>
                        </div>
                        <div class="crop-details">
                            <div class="detail-item">
                                <span class="icon">ğŸŒ¡ï¸</span>
                                <span class="label">Temperature:</span>
                                <span class="value">24-37Â°C (Optimum Favorable)</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">ğŸ’§</span>
                                <span class="label">Humidity:</span>
                                <span class="value">High Humidity Required</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">ğŸŒ§ï¸</span>
                                <span class="label">Rainfall:</span>
                                <span class="value">1000-1500mm</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">â±ï¸</span>
                                <span class="label">Duration:</span>
                                <span class="value">120-150 days</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">ğŸŒ</span>
                                <span class="label">Soil:</span>
                                <span class="value">Clay Loam</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">ğŸ”¬</span>
                                <span class="label">pH:</span>
                                <span class="value">6.0-7.5</span>
                            </div>
                        </div>
                        <div class="growing-conditions">
                            <h4>Ideal Growing Conditions</h4>
                            <ul>
                                <li>ğŸŒ¡ï¸ 27-32Â°Celsius</li>
                                <li>ğŸ’§ 80-90% Humidity</li>
                                <li>ğŸŒ§ï¸ 1200mm+ Rainfall</li>
                                <li>ğŸŒ Heavy Clay Soil</li>
                                <li>ğŸ”¬ pH 6.2-7.2</li>
                                <li>â˜€ï¸ Warm Climate</li>
                            </ul>
                        </div>
                        <div class="card-actions">
                            <button class="btn-outline" onclick="viewDetails('jute')">ğŸ“„ Details</button>
                            <button class="btn-start" onclick="startGrowing('Jute', 0.88)">ğŸŒ± Start Growing</button>
                        </div>
                    </div>

                    <!-- Banana -->
                    <div class="crop-card high-priority">
                        <div class="crop-header">
                            <h3>Banana</h3>
                            <span class="priority-badge high">High Priority</span>
                        </div>
                        <div class="crop-details">
                            <!-- ...similar structure... -->
                        </div>
                        <div class="growing-conditions">
                            <h4>Ideal Growing Conditions</h4>
                            <ul>
                                <li>ğŸŒ¡ï¸ 26-30Â°Celsius</li>
                                <li>ğŸ’§ 75-85% Humidity</li>
                                <li>ğŸŒ§ï¸ 1200-2500mm Rainfall</li>
                                <li>ğŸŒ Rich Loamy Soil</li>
                                <li>ğŸ”¬ pH 6.5-7.5</li>
                                <li>â˜€ï¸ Tropical Climate</li>
                            </ul>
                        </div>
                        <div class="card-actions">
                            <button class="btn-outline" onclick="viewDetails('banana')">ğŸ“„ Details</button>
                            <button class="btn-start" onclick="startGrowing('Banana', 0.85)">ğŸŒ± Start Growing</button>
                        </div>
                    </div>

                    <!-- Rice -->
                    <div class="crop-card medium-priority">
                        <div class="crop-header">
                            <h3>Rice</h3>
                            <span class="priority-badge medium">Medium Priority</span>
                        </div>
                        <!-- ...similar structure... -->
                        <div class="card-actions">
                            <button class="btn-outline" onclick="viewDetails('rice')">ğŸ“„ Details</button>
                            <button class="btn-start" onclick="startGrowing('Rice', 0.72)">ğŸŒ± Start Growing</button>
                        </div>
                    </div>

                    <!-- Cotton -->
                    <div class="crop-card medium-priority">
                        <div class="crop-header">
                            <h3>Cotton</h3>
                            <span class="priority-badge medium">Medium Priority</span>
                        </div>
                        <!-- ...similar structure... -->
                        <div class="card-actions">
                            <button class="btn-outline" onclick="viewDetails('cotton')">ğŸ“„ Details</button>
                            <button class="btn-start" onclick="startGrowing('Cotton', 0.68)">ğŸŒ± Start Growing</button>
                        </div>
                    </div>

                    <!-- Coffee -->
                    <div class="crop-card medium-priority">
                        <div class="crop-header">
                            <h3>Coffee</h3>
                            <span class="priority-badge medium">Medium Priority</span>
                        </div>
                        <!-- ...similar structure... -->
                        <div class="card-actions">
                            <button class="btn-outline" onclick="viewDetails('coffee')">ğŸ“„ Details</button>
                            <button class="btn-start" onclick="startGrowing('Coffee', 0.65)">ğŸŒ± Start Growing</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function startGrowing(cropName, probability) {
        window.location.href = '/crop/start/' + cropName + '/' + probability;
    }

    function viewDetails(cropName) {
        alert('Viewing detailed information for ' + cropName);
    }
</script>
{% endblock %}