{% extends "base.html" %}

{% block title %}Fertilizer Results - Smart Farming Assistant{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/fertilizer.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="fertilizer-results">
        <h2>ðŸ§ª Fertilizer Recommendations</h2>
        <p>For {{ crop_type }} in {{ soil_type }} soil:</p>
        
        <div class="recommendations-grid">
            {% for fertilizer in recommendations %}
            <div class="recommendation-card priority-{{ fertilizer.priority.lower() }}">
                <div class="fertilizer-header">
                    <h3>{{ fertilizer.name }}</h3>
                    <span class="priority-badge">{{ fertilizer.priority }}</span>
                </div>
                <div class="fertilizer-details">
                    <p><strong>Application Rate:</strong> {{ fertilizer.application_rate }}</p>
                    <p><strong>Description:</strong> {{ fertilizer.description }}</p>
                    <p><strong>Price Range:</strong> {{ fertilizer.price_range }}</p>
                    {% if fertilizer.nitrogen_content %}
                    <p><strong>Nitrogen:</strong> {{ fertilizer.nitrogen_content }}</p>
                    {% endif %}
                    {% if fertilizer.phosphorous_content %}
                    <p><strong>Phosphorous:</strong> {{ fertilizer.phosphorous_content }}</p>
                    {% endif %}
                    {% if fertilizer.potassium_content %}
                    <p><strong>Potassium:</strong> {{ fertilizer.potassium_content }}</p>
                    {% endif %}
                </div>
                <form action="{{ url_for('fertilizer.save_fertilizer') }}" method="POST" style="display: inline;">
                    <input type="hidden" name="fertilizer_name" value="{{ fertilizer.name }}">
                    <input type="hidden" name="crop_type" value="{{ crop_type }}">
                    <input type="hidden" name="priority" value="{{ fertilizer.priority }}">
                    <input type="hidden" name="description" value="{{ fertilizer.description }}">
                    <input type="hidden" name="application_rate" value="{{ fertilizer.application_rate }}">
                    <input type="hidden" name="price_range" value="{{ fertilizer.price_range }}">
                    <input type="hidden" name="soil_type" value="{{ soil_type }}">
                    <input type="hidden" name="nitrogen" value="{{ nitrogen|default('') }}">
                    <input type="hidden" name="phosphorus" value="{{ phosphorus|default('') }}">
                    <input type="hidden" name="potassium" value="{{ potassium|default('') }}">
                    <button type="submit" class="btn btn-success">Add to Dashboard</button>
                </form>
            </div>
            {% endfor %}
        </div>
        
        <div class="actions">
            <a href="{{ url_for('fertilizer.fertilizer_recommend') }}" class="btn btn-secondary">Try Again</a>
            <a href="{{ url_for('dashboard.dashboard') }}" class="btn btn-primary">Back to Dashboard</a>
        </div>
    </div>
</div>
{% endblock %}
